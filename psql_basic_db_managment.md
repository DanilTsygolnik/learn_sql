## Базовая работа с БД

### Создание базы данных

Создание БД требует соответствующих [привелегий](managing_roles.md#Управление-ролями-требования), поэтому универсальный вариант - работать из под системного пользователя _postgres_:
```
createdb -U postgres <database_name>
```

### Подключение к базе данных

Вывести список доступных БД:
- через терминал: `sudo -u postgres psql -l`
- из psql (PostgreSQL interactive terminal): `\l'`

Если создана [роль для пользователя текущей сессии](managing_roles.md#Роль-для-вызова-psql), сработают сокращенные команды:
```
# создаем и удаляем новую БД из под пользовательской роли
$ createdb <database_name>
$ dropdb <database_name>

# подключаемся к дефолтной БД пользовательской роли
$ psql

# выводим список доступных БД из под пользовательской роли
$ psql -l
$ psql -c '\l'

# подключаемся к БД customers из под пользовательской роли
$ psql customers
```

Работа через psql означает, что есть действующее подключение к некоторой БД. Несколько полезных команд интерактивной оболочки:
- вывести сведения о подключении: `\conninfo`;
- вывести данные об отношениях внутри БД (схема): `\d` (от describe);
- вывести данные о таблице: `\d tablename`;

### Добавление данных в базу

Пусть из командной строки требуется создать новую БД "hexlet", которая будет содержать 2 таблицы с данными: topics и users.

Поскольку все операции производятся через SQL-запросы  решение можно написать целиком в psql, но гораздо удобнее воспользоваться отдельными файлами:
1) для схемы данных ([schema.sql](hexlet_db/schema.sql));
2) для набора данных в таблицу topics ([topics.sql](hexlet_db/topics.sql));
3) для набора данных в таблицу users ([users.sql](hexlet_db/users.sql));

Далее, находясь в директории с sql-файлами, останется поочередно ввести следующие команды:
```
psql hexlet < schema.sql
psql hexlet < topics.sql
psql hexlet < users.sql
```
Можно пойти дальше и свести создание БД "hexlet" к одной команде `make load-all`, которую (в данном случае) останется вызвать из директории с [make-файлом](hexlet_db/Makefile) и sql-файлами.
